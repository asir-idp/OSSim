<html>
<head>
<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
<link rel="StyleSheet" href="resources.css" type="text/css">
</head>
<body>
<h3>Example: Indexed Allocation (UNIX). Indireccions</h3>
<hr>
<p>In this example a folder tree is created with different types of
file system objects: folders, files and links.</p>
<p>On UNIX each object is associated with a structure called the
i-node, this reference is in the folder entries where the objects are.</p>
<p><b>Reminder 1:</b> the folders' color is green and the links are blue.
The files color is defined when created.</p>
<p><b>Reminder 2:</b> In the simulation the folder size is 1 block,
while the links do not occupy disk space, they are simply entries in its
folder data.</p>
<p><b>Reminder 3:</b> The structure of an i-node is</p>
<ul>
	<li>Information, which for example contains the number of
	references to the i-node</li>
	<li>12 pointers to data blocks</li>
	<li>1 pointer to an indirect block.</li>
	<li>1 pointer to a double indirect block.</li>
	<li>1 pointer to a triple indirect block.</li>
</ul>
<p>For each new file data blocks are filled in the order of the
i-node, first direct, then indirections single, double and triple.</p>
<br>
<table>
	<tr class="tablehead">
		<td colspan="4">Tree</td>
		<td>Type</td>
		<td>Size <br>
		Units</td>
	</tr>
	<tr>
		<td>/</td>
		<td></td>
		<td></td>
		<td></td>
		<td>Folder</td>
		<td>1</td>
	</tr>
	<tr>
		<td></td>
		<td>folder1</td>
		<td></td>
		<td></td>
		<td>Folder</td>
		<td>1</td>
	</tr>
	<tr>
		<td></td>
		<td></td>
		<td>file1.txt</td>
		<td></td>
		<td>File</td>
		<td>101</td>
	</tr>
	<tr>
		<td></td>
		<td></td>
		<td>file2.txt</td>
		<td></td>
		<td>File</td>
		<td>200</td>
	</tr>
	<tr>
		<td></td>
		<td></td>
		<td>link1</td>
		<td></td>
		<td>Hard link<br>
		(to file1.txt)</td>
		<td>1</td>
	</tr>
	<tr>
		<td></td>
		<td>folder2</td>
		<td></td>
		<td></td>
		<td>Folder</td>
		<td>1</td>
	</tr>
	<tr>
		<td></td>
		<td></td>
		<td>file3.txt</td>
		<td></td>
		<td>File</td>
		<td>460</td>
	</tr>
	<tr>
		<td></td>
		<td></td>
		<td>Folder3</td>
		<td></td>
		<td>Folder</td>
		<td>1</td>
	</tr>
	<tr>
		<td></td>
		<td></td>
		<td></td>
		<td>file4.txt</td>
		<td>File</td>
		<td>120</td>
	</tr>
	<tr>
		<td></td>
		<td></td>
		<td>link2</td>
		<td></td>
		<td>Hard link<br>
		(to link1)</td>
		<td>0</td>
	</tr>
</table>
<p>Block size is 1 unit.</p>
<p>Comments:</p>
<ul>
	<li>Indirect blocks are shown with the character &quot;I&quot;.
	These blocks contain no data, only pointers to data blocks or other
	indirect blocks</li>
	<li>Two indirect blocks followed (&quot;I&quot;, &quot;I&quot;)
	means that second indirection starts filling, and three indirect blocks
	(&quot;I&quot;, &quot;I&quot;, &quot;I&quot;) the third</li>
	<li>It is possible to keep track of indirections and blocks of
	data by opening corresponding i-node information (right click on folder
	view, pop up menu, and then right click again on its indirect blocks).</li>
</ul>
</body>
</html>